<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario Producto</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>

<body>

    <nav class="navbar navbar-expand-lg navbar-light bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Navbar</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Link</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Dropdown
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="#">Action</a></li>
                            <li><a class="dropdown-item" href="#">Another action</a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item" href="#">Something else here</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link disabled">Disabled</a>
                    </li>
                </ul>
                <form class="d-flex">
                    <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-danger" type="submit">Search</button>
                </form>
            </div>
        </div>
    </nav>

    <div class="container">
        <form>
            <div class="mb-3">
                <label for="producto" class="form-label">Producto</label>
                <input type="text" class="form-control" id="producto" name="producto" aria-describedby="productoHelp">
                <div id="productoHelp" class="form-text">Esribe el nombre del producto</div>
            </div>
            <div class="mb-3">
                <label for="existencias" class="form-label">Existencias</label>
                <input type="number" min="1" step="1" class="form-control" id="existencias" name="existencias"
                    aria-describedby="existenciasHelp">
                <div id="existenciasHelp" class="form-text">Existencias del producto</div>
            </div>

            <div class="mb-3">
                <label for="precio_unitario" class="form-label">Precio unitario</label>
                <input type="number" min="0" step="0.1" class="form-control" id="precio_unitario" name="precio_unitario"
                    aria-describedby="precio_unitarioHelp">
                <div id="precio_unitarioHelp" class="form-text">precio unitario del producto</div>
            </div>

            <div class="mb-3">
                <label for="fotografia" class="form-label">Fotografia del producto</label>
                <input type="text" min="1" step="1" class="form-control" id="fotografia" name="fotografia"
                    aria-describedby="fotografiaHelp">
                <div id="fotografiaHelp" class="form-text">Fotografia del producto</div>
            </div>
            <div class="mb-3">
                <label for="descripcion" class="form-label">Descripcion</label>
                <input type="text" class="form-control" id="descripcion" name="descripcion"
                    aria-describedby="descripcionHelp">
                <div id="descripcionHelp" class="form-text">Esribe la descripcion del producto</div>
            </div>

            <div class="form-check">
                <input class="form-check-input" type="radio" name="estado" id="estado1" value="activo">
                <label class="form-check-label" for="estado1">
                    Activo
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="estado" id="estado2" value="inactivo" checked>
                <label class="form-check-label" for="estado2">
                    Inactivo
                </label>
            </div>

            <div class="mb-3">
                <label for="tasa_iva" class="form-label">Tasa de iva</label>
                <input type="number" min="0" step="0.1" class="form-control" id="tasa_iva" name="tasa_iva"
                    aria-describedby="tasa_ivaHelp">
                <div id="tasa_ivaHelp" class="form-text">Tasa de iva del producto</div>
            </div>

            <button type="button" class="btn btn-danger" id="btn_guardar">Enviar</button>
        </form>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
        integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
        integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <script>
        $(function () {
            $('#btn_guardar').click(function (e) {
                // console.log('click')
                // console.log($('#producto').val());
                // console.log($('#existencias').val());
                // console.log($('#precio_unitario').val());
                // console.log($('#foto').val());
                // console.log($('#descripcion').val());
                // console.log($('input[name=estado]:checked').val());
                // console.log($('#tasa_iva').val());

                var url = 'http://127.0.0.1:8000/api/productos';
                var data = { 
                producto:$('#producto').val()
                ,existencias:$('#existencias').val()
                ,precio_unitario:$('#precio_unitario').val()
                ,fotografia:$('#fotografia').val()
                ,descripcion :$('#descripcion').val()
                ,estado:$('input[name=estado]:checked').val()
                ,tasa_iva:$('#tasa_iva').val()
                };

                fetch(url, {
                    method: 'POST', // or 'PUT'
                    body: JSON.stringify(data), // data can be `string` or {object}!
                    headers: {
                        'Content-Type': 'application/json'
                        ,'Accept':'application/json'
                    }
                }).then(res => {console.log(res.json())})
                    .catch(error => console.error('Error:', error))
                    .then(response => console.log('Success:', response));



                // fetch('http://127.0.0.1:8000/api/productos').then(function (response) {
                //     if (response.ok) {
                //         // response.blob().then(function (miBlob) {
                //         //     var objectURL = URL.createObjectURL(miBlob);
                //         //     miImagen.src = objectURL;
                //         // });
                //         console.log(response.json);
                //     } else {
                //         console.log('Respuesta de red OK pero respuesta HTTP no OK');
                //     }
                // })
                //     .catch(function (error) {
                //         console.log('Hubo un problema con la petici√≥n Fetch:' + error.message);
                //  });
            });
        });
    </script>
</body>

</html>